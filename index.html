<!DOCTYPE html>
<html>
<head>
  <title>RightClick CRM Acknowledgement</title>
  <style>
    body { font-family: Arial; background:#f2f2f2; padding:20px; }
    h2 { text-align:center; }
    label { font-weight:bold; display:block; margin-top:10px; }
    input, textarea, select {
      width:100%; padding:8px; margin-top:4px;
      border-radius:5px; border:1px solid #ccc;
    }
    button {
      margin-top:15px; padding:10px;
      background:green; color:white; border:none;
      width:100%; font-size:16px;
    }
  </style>
</head>
<body>

<h2>RightClick CRM Acknowledgement</h2>

<form id="crmForm">
  <label>Customer Name</label>
  <input type="text" id="customerName" required>

  <label>Mobile Number</label>
  <input type="text" id="mobile" required>

  <label>Device</label>
  <select id="device">
    <option>Laptop</option>
    <option>Desktop</option>
    <option>Printer</option>
    <option>UPS</option>
  </select>

  <label>Problem Reported</label>
  <textarea id="problem"></textarea>

  <label>Estimation</label>
  <input type="text" id="estimation">

  <label>Quotation</label>
  <input type="text" id="quotation">

  <label>Diagnosis</label>
  <textarea id="diagnosis"></textarea>

  <button type="submit">Generate Job ID & Send WhatsApp</button>
</form>

<script>
document.getElementById("crmForm").addEventListener("submit", function(e) {
  e.preventDefault();

  let jobId = "RC" + Date.now();

  let data = {
    jobId: jobId,
    customerName: document.getElementById("customerName").value,
    mobile: document.getElementById("mobile").value,
    device: document.getElementById("device").value,
    problem: document.getElementById("problem").value,
    estimation: document.getElementById("estimation").value,
    quotation: document.getElementById("quotation").value,
    diagnosis: document.getElementById("diagnosis").value,
    technician: "RightClick",
    status: "Received"
  };

  fetch("https://script.google.com/macros/s/AKfycbwtndD5BkIQsH63piVvHoM0TUlU-5cpb0vWxP0VVxasP9_CdWF7khWoPiB5_mWW6gVNMg/exec", {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(response => {
    alert("Job Created Successfully!\nJob ID: " + jobId);

    let msg = `RightClick Computers
Job ID: ${jobId}
Name: ${data.customerName}
Phone: ${data.mobile}
Device: ${data.device}
Problem: ${data.problem}
Diagnosis: ${data.diagnosis}

Owner: Avinash Palla
+91 9059895427`;

    let whatsappUrl = `https://wa.me/91${data.mobile}?text=` + encodeURIComponent(msg);
    window.open(whatsappUrl, "_blank");
  })
  .catch(err => alert("Error: " + err));
});
</script>

</body>
</html>
